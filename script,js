console.log("JS LOADED"); // â† debug proof

const noBtn = document.getElementById("no");
const yesBtn = document.getElementById("yes");
const music = document.getElementById("music");
const timeEl = document.getElementById("time");

let time = 15;

/* â³ TIMER */
setInterval(() => {
  time--;
  if (time > 0) {
    timeEl.textContent = time;
  }
}, 1000);

/* ðŸš« MOVE NO BUTTON WHEN CURSOR GETS CLOSE */
document.addEventListener("mousemove", (e) => {
  const rect = noBtn.getBoundingClientRect();
  const bx = rect.left + rect.width / 2;
  const by = rect.top + rect.height / 2;

  const dist = Math.hypot(e.clientX - bx, e.clientY - by);

  if (dist < 150) {
    moveNo();
  }
});

function moveNo() {
  const padding = 80;
  const x = Math.random() * (window.innerWidth - padding * 2) + padding;
  const y = Math.random() * (window.innerHeight - padding * 2) + padding;

  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

/* ðŸ’¥ HEART EXPLOSION */
function explode() {
  for (let i = 0; i < 40; i++) {
    const h = document.createElement("div");
    h.textContent = "ðŸ’–";
    h.style.position = "fixed";
    h.style.left = "50%";
    h.style.top = "50%";
    h.style.fontSize = "24px";
    h.style.pointerEvents = "none";

    const angle = Math.random() * Math.PI * 2;
    const dist = Math.random() * 300;

    h.animate([
      { transform: "translate(0,0)", opacity: 1 },
      {
        transform: `translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`,
        opacity: 0
      }
    ], { duration: 1000 });

    document.body.appendChild(h);
    setTimeout(() => h.remove(), 1000);
  }
}

/* ðŸ’– YES BUTTON */
yesBtn.addEventListener("click", () => {
  music.play();
  explode();

  document.body.innerHTML = `
    <h1 style="margin-top:40vh;">Laura ðŸ’–</h1>
    <h2>Youâ€™re my Valentine.</h2>
  `;
});
